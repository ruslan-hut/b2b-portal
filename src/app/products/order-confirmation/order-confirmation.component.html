<div class="confirmation-container">
  <div class="page-header">
    <h1>Confirm Your Order</h1>
  </div>

  <div class="confirmation-content">
    <div class="order-summary">
      <h2>Order Summary</h2>
      
      <div class="summary-items">
        <div class="summary-item" *ngFor="let item of cartItems">
          <div class="item-info">
            <span class="item-name">{{ item.productName }}</span>
            <span class="item-details">
              ${{ item.price.toFixed(2) }} Ã— {{ item.quantity }}
            </span>
          </div>
          <div class="item-actions">
            <span class="item-total">${{ item.subtotal.toFixed(2) }}</span>
            <button class="remove-btn" (click)="removeItem(item.productId)">
              Remove
            </button>
          </div>
        </div>
      </div>

      <div class="summary-total">
        <span class="total-label">Total Amount:</span>
        <span class="total-amount">${{ cartTotal.toFixed(2) }}</span>
      </div>
    </div>

    <div class="shipping-form-section">
      <h2>Shipping Address</h2>
      
      <form [formGroup]="shippingForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group full-width">
            <label for="street">Street Address *</label>
            <input
              type="text"
              id="street"
              formControlName="street"
              class="form-control"
              [class.is-invalid]="submitted && f['street'].errors"
              placeholder="Enter street address"
            />
            <div class="invalid-feedback" *ngIf="submitted && f['street'].errors">
              <div *ngIf="f['street'].errors['required']">Street address is required</div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="city">City *</label>
            <input
              type="text"
              id="city"
              formControlName="city"
              class="form-control"
              [class.is-invalid]="submitted && f['city'].errors"
              placeholder="City"
            />
            <div class="invalid-feedback" *ngIf="submitted && f['city'].errors">
              <div *ngIf="f['city'].errors['required']">City is required</div>
            </div>
          </div>

          <div class="form-group">
            <label for="state">State *</label>
            <input
              type="text"
              id="state"
              formControlName="state"
              class="form-control"
              [class.is-invalid]="submitted && f['state'].errors"
              placeholder="State"
            />
            <div class="invalid-feedback" *ngIf="submitted && f['state'].errors">
              <div *ngIf="f['state'].errors['required']">State is required</div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="zipCode">ZIP Code *</label>
            <input
              type="text"
              id="zipCode"
              formControlName="zipCode"
              class="form-control"
              [class.is-invalid]="submitted && f['zipCode'].errors"
              placeholder="12345"
            />
            <div class="invalid-feedback" *ngIf="submitted && f['zipCode'].errors">
              <div *ngIf="f['zipCode'].errors['required']">ZIP code is required</div>
              <div *ngIf="f['zipCode'].errors['pattern']">Invalid ZIP code format</div>
            </div>
          </div>

          <div class="form-group">
            <label for="country">Country *</label>
            <input
              type="text"
              id="country"
              formControlName="country"
              class="form-control"
              [class.is-invalid]="submitted && f['country'].errors"
            />
            <div class="invalid-feedback" *ngIf="submitted && f['country'].errors">
              <div *ngIf="f['country'].errors['required']">Country is required</div>
            </div>
          </div>
        </div>

        <div class="alert alert-danger" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="cancelOrder()" [disabled]="loading">
            Cancel
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="loading">
            <span *ngIf="loading" class="spinner"></span>
            <span *ngIf="!loading">Place Order</span>
            <span *ngIf="loading">Processing...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
